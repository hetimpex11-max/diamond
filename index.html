<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diamond Manager Pro - Complete Business Management</title>
    
    <meta name="description" content="Complete Jewelry & Diamond Business Management Software">
    <meta name="keywords" content="jewelry, diamond, business management, manufacturing, inventory">
    <meta name="author" content="Diamond Manager Pro">
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üíé</text></svg>">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="styles.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>

</head>
<body>
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <div class="diamond-loader">üíé</div>
            <h2>Diamond Manager Pro</h2>
            <p>Loading your jewelry business...</p>
            <div class="loading-bar">
                <div class="loading-progress"></div>
            </div>
        </div>
    </div>

    <div id="authScreen" class="auth-screen">
        <div class="auth-container">
            <div class="auth-header">
                <div class="logo-section">
                    <span class="logo-icon">üíé</span>
                    <h1>Diamond Manager Pro</h1>
                    <p>Complete Jewelry Business Management</p>
                </div>
            </div>
            
            <div id="loginForm" class="auth-form">
                <h2>Welcome Back</h2>
                <form id="loginFormElement">
                    <div class="form-group">
                        <label>Email or Username</label>
                        <input type="text" id="loginEmail" required placeholder="Enter your email or username">
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="loginPassword" required placeholder="Enter your password">
                    </div>
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="rememberMe">
                            <span>Remember me</span>
                        </label>
                    </div>
                    <button type="submit" class="btn-primary">Sign In</button>
                </form>
                
                <div class="demo-accounts">
                    <h4>Demo Accounts:</h4>
                    <div class="demo-account-item">
                        <strong>Shailesh Account:</strong><br>
                        Username: <code>shailesh.com</code><br>
                        Password: <code>932850</code>
                    </div>
                    <div class="demo-account-item">
                        <strong>Demo Account:</strong><br>
                        Username: <code>demo@diamondmanager.com</code><br>
                        Password: <code>demo123</code>
                    </div>
                </div>
                
                <div class="auth-footer">
                    <p>Don't have an account? <a href="#" id="showRegisterLink">Create Business Profile</a></p>
                    <p><a href="#" id="showDemoLink">Auto-fill Demo Credentials</a></p>
                </div>
            </div>
            
            <div id="registerForm" class="auth-form" style="display: none;">
                <h2>Create Business Profile</h2>
                <form id="registerFormElement">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Business Name</label>
                            <input type="text" id="businessName" required placeholder="Enter your business name">
                        </div>
                        <div class="form-group">
                            <label>Owner Name</label>
                            <input type="text" id="ownerName" required placeholder="Enter owner's full name">
                        </div>
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" id="ownerEmail" required placeholder="Enter business email">
                        </div>
                        <div class="form-group">
                            <label>Phone</label>
                            <input type="tel" id="ownerPhone" required placeholder="+91 98765 43210">
                        </div>
                        <div class="form-group">
                            <label>Business Type</label>
                            <select id="businessType" required>
                                <option value="">Select Type</option>
                                <option value="Manufacturing">Manufacturing</option>
                                <option value="Retail">Retail</option>
                                <option value="Wholesale">Wholesale</option>
                                <option value="Both">Manufacturing & Retail</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Password</label>
                            <input type="password" id="registerPassword" required placeholder="Create a strong password">
                        </div>
                    </div>
                    <button type="submit" class="btn-primary">Create Business Profile</button>
                </form>
                <div class="auth-footer">
                    <p>Already have an account? <a href="#" id="showLoginLink">Sign In</a></p>
                </div>
            </div>
        </div>
    </div>

    <div id="mainApp" class="app-container" style="display: none;">
        <div id="toastContainer" class="toast-container"></div>
        
        <header class="top-bar">
            <div class="top-bar-left">
                <button class="sidebar-toggle" onclick="toggleSidebar()">‚ò∞</button>
                <div class="logo">
                    <span class="logo-icon">üíé</span>
                    <div class="logo-text">
                        <h1>Diamond Manager Pro</h1>
                        <span id="businessNameDisplay">Loading...</span>
                    </div>
                </div>
            </div>
            <div class="top-bar-center">
                <div class="quick-stats">
                    <div class="quick-stat">
                        <span class="stat-label">Today's Revenue</span>
                        <span class="stat-value" id="todayRevenue">‚Çπ0</span>
                    </div>
                    <div class="quick-stat">
                        <span class="stat-label">In Manufacturing</span>
                        <span class="stat-value" id="inManufacturing">0</span>
                    </div>
                    <div class="quick-stat">
                        <span class="stat-label">Quality Check</span>
                        <span class="stat-value" id="qualityCheck">0</span>
                    </div>
                </div>
            </div>
            <div class="top-bar-right">
                 <div class="notifications">
                    <button class="notification-btn" onclick="toggleNotifications()">
                        üîî
                        <span class="notification-badge" id="notificationCount">3</span>
                    </button>
                    <div class="notification-dropdown" id="notificationDropdown">
                        </div>
                </div>
                <div class="user-profile" onclick="showUserMenu()">
                    <div class="user-info">
                        <span class="user-name" id="currentUserName">Loading...</span>
                        <span class="user-role" id="currentUserRole">Owner</span>
                    </div>
                    <div class="user-avatar" id="userAvatar">A</div>
                </div>
            </div>
        </header>

        <nav class="sidebar" id="sidebar">
            <div class="sidebar-content">
                <div id="ownerNavigation" class="nav-section">
                    <h3>Business Management</h3>
                    <ul class="nav-menu">
                        <li><a href="#" onclick="showSection('dashboard')" class="nav-link active">
                            <span class="nav-icon">üìä</span>
                            <span class="nav-text">Dashboard</span>
                        </a></li>
                        <li><a href="#" onclick="showSection('business-profile')" class="nav-link">
                            <span class="nav-icon">üè¢</span>
                            <span class="nav-text">Business Profile</span>
                        </a></li>
                        <li><a href="#" onclick="showSection('manufacturing')" class="nav-link">
                            <span class="nav-icon">‚öôÔ∏è</span>
                            <span class="nav-text">Manufacturing</span>
                        </a></li>
                        <li><a href="#" onclick="showSection('inventory')" class="nav-link">
                            <span class="nav-icon">üíé</span>
                            <span class="nav-text">Inventory</span>
                        </a></li>
                        <li><a href="#" onclick="showSection('customers')" class="nav-link">
                            <span class="nav-icon">üë•</span>
                            <span class="nav-text">Customers</span>
                        </a></li>
                        <li><a href="#" onclick="showSection('financial')" class="nav-link">
                            <span class="nav-icon">üí∞</span>
                            <span class="nav-text">Financial</span>
                        </a></li>
                        <li><a href="#" onclick="showSection('employees')" class="nav-link">
                            <span class="nav-icon">üë∑</span>
                            <span class="nav-text">Employees</span>
                        </a></li>
                        <li><a href="#" onclick="showSection('reports')" class="nav-link">
                            <span class="nav-icon">üìà</span>
                            <span class="nav-text">Reports</span>
                        </a></li>
                    </ul>
                </div>

                <div id="workerNavigation" class="nav-section" style="display: none;">
                    <h3>My Workspace</h3>
                    <ul class="nav-menu">
                        <li><a href="#" onclick="showSection('worker-dashboard')" class="nav-link active">
                            <span class="nav-icon">üîß</span>
                            <span class="nav-text">My Tasks</span>
                        </a></li>
                        <li><a href="#" onclick="showSection('my-diamonds')" class="nav-link">
                            <span class="nav-icon">üíé</span>
                            <span class="nav-text">My Diamonds</span>
                        </a></li>
                        <li><a href="#" onclick="showSection('quality-check')" class="nav-link">
                            <span class="nav-icon">‚úÖ</span>
                            <span class="nav-text">Quality Control</span>
                        </a></li>
                        <li><a href="#" onclick="showSection('work-schedule')" class="nav-link">
                            <span class="nav-icon">üìÖ</span>
                            <span class="nav-text">Schedule</span>
                        </a></li>
                    </ul>
                </div>

                <div class="nav-section">
                    <h3>Tools</h3>
                    <ul class="nav-menu">
                        <li><a href="#" onclick="showSection('pricing')" class="nav-link">
                            <span class="nav-icon">üí∞</span>
                            <span class="nav-text">Pricing Calculator</span>
                        </a></li>
                        <li><a href="#" onclick="showSection('billing')" class="nav-link">
                            <span class="nav-icon">üßæ</span>
                            <span class="nav-text">Billing & POS</span>
                        </a></li>
                    </ul>
                </div>
            </div>
        </nav>

        <main class="main-content">
            <section id="dashboard" class="section active">
                <div class="section-header">
                    <h1>Business Dashboard</h1>
                    <div class="header-actions">
                        <button class="btn-secondary" onclick="refreshDashboard()">üîÑ Refresh</button>
                        <button class="btn-primary" onclick="showQuickActions()">‚ö° Quick Actions</button>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="dashboard-card business-overview">
                        <h3>üìä Business Overview</h3>
                        <div class="overview-stats">
                            <div class="overview-item">
                                <span class="overview-label">Total Business Value</span>
                                <span class="overview-value" id="totalBusinessValue">‚Çπ0</span>
                            </div>
                            <div class="overview-item">
                                <span class="overview-label">Monthly Revenue</span>
                                <span class="overview-value" id="monthlyRevenue">‚Çπ0</span>
                            </div>
                            <div class="overview-item">
                                <span class="overview-label">Active Employees</span>
                                <span class="overview-value" id="activeEmployees">0</span>
                            </div>
                            <div class="overview-item">
                                <span class="overview-label">Customer Base</span>
                                <span class="overview-value" id="customerBase">0</span>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-card manufacturing-status">
                        <h3>‚öôÔ∏è Manufacturing Pipeline</h3>
                        <div class="manufacturing-pipeline">
                            <div class="pipeline-stage">
                                <div class="stage-header">
                                    <span class="stage-name">Raw Materials</span>
                                    <span class="stage-count" id="rawMaterials">0</span>
                                </div>
                                <div class="stage-progress">
                                    <div class="progress-bar" style="width: 85%"></div>
                                </div>
                            </div>
                            <div class="pipeline-stage">
                                <div class="stage-header">
                                    <span class="stage-name">In Manufacturing</span>
                                    <span class="stage-count" id="inManufacturingCount">0</span>
                                </div>
                                <div class="stage-progress">
                                    <div class="progress-bar" style="width: 65%"></div>
                                </div>
                            </div>
                            <div class="pipeline-stage">
                                <div class="stage-header">
                                    <span class="stage-name">Quality Control</span>
                                    <span class="stage-count" id="qualityControlCount">0</span>
                                </div>
                                <div class="stage-progress">
                                    <div class="progress-bar" style="width: 90%"></div>
                                </div>
                            </div>
                            <div class="pipeline-stage">
                                <div class="stage-header">
                                    <span class="stage-name">Ready for Delivery</span>
                                    <span class="stage-count" id="readyForDelivery">0</span>
                                </div>
                                <div class="stage-progress">
                                    <div class="progress-bar" style="width: 100%"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-card alerts-panel">
                        <h3>üö® Alerts & Notifications</h3>
                        <div class="alerts-list" id="alertsList">
                            <div class="alert-item high-priority">
                                <h4>High Value Transfer</h4>
                                <p>Diamond DM001 (‚Çπ3,50,000) in manufacturing</p>
                                <span class="alert-time">Active</span>
                            </div>
                            <div class="alert-item medium-priority">
                                <h4>Quality Check Pending</h4>
                                <p>Ring RG001 ready for final inspection</p>
                                <span class="alert-time">2 hours ago</span>
                            </div>
                            <div class="alert-item low-priority">
                                <h4>Delivery Ready</h4>
                                <p>Earrings ER001 completed and ready</p>
                                <span class="alert-time">1 day ago</span>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-card quick-actions">
                        <h3>‚ö° Quick Actions</h3>
                        <div class="quick-actions-grid">
                            <button class="quick-action-btn" onclick="showSection('manufacturing')">
                                <span class="action-icon">‚öôÔ∏è</span>
                                <span>Manufacturing</span>
                            </button>
                            <button class="quick-action-btn" onclick="showAddDiamondModal()">
                                <span class="action-icon">üíé</span>
                                <span>Add Diamond</span>
                            </button>
                            <button class="quick-action-btn" onclick="showSection('billing')">
                                <span class="action-icon">üßæ</span>
                                <span>New Invoice</span>
                            </button>
                            <button class="quick-action-btn" onclick="generateReport()">
                                <span class="action-icon">üìä</span>
                                <span>Generate Report</span>
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <section id="manufacturing" class="section">
                <div class="section-header">
                    <h1>‚öôÔ∏è Manufacturing Workflow</h1>
                    <div class="header-actions">
                        <button class="btn-secondary" onclick="exportManufacturingData()">üì§ Export</button>
                        <button class="btn-primary" onclick="showAddDiamondModal()">üíé Add Diamond</button>
                    </div>
                </div>
                
                <div class="manufacturing-overview">
                    <div class="overview-cards">
                        <div class="overview-card">
                            <div class="card-icon">üì¶</div>
                            <div class="card-content">
                                <h3>Raw Materials</h3>
                                <div class="card-value" id="rawMaterialsCount">0</div>
                                <div class="card-change">Ready for processing</div>
                            </div>
                        </div>
                        <div class="overview-card">
                            <div class="card-icon">‚öôÔ∏è</div>
                            <div class="card-content">
                                <h3>In Manufacturing</h3>
                                <div class="card-value" id="inManufacturingValue">0</div>
                                <div class="card-change">Active processes</div>
                            </div>
                        </div>
                        <div class="overview-card">
                            <div class="card-icon">‚úÖ</div>
                            <div class="card-content">
                                <h3>Quality Control</h3>
                                <div class="card-value" id="qualityControlValue">0</div>
                                <div class="card-change">Pending approval</div>
                            </div>
                        </div>
                        <div class="overview-card">
                            <div class="card-icon">üì¶</div>
                            <div class="card-content">
                                <h3>Completed</h3>
                                <div class="card-value" id="completedValue">0</div>
                                <div class="card-change">Ready for delivery</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="manufacturing-table-container">
                    <div class="table-header">
                        <h3>üíé Manufacturing Items</h3>
                        <div class="table-actions">
                            <input type="text" placeholder="Search items..." class="search-input" onkeyup="filterManufacturingItems()">
                            <select class="filter-select" onchange="filterManufacturingByStatus()">
                                <option value="">All Status</option>
                                <option value="Raw">Raw</option>
                                <option value="In Manufacturing">In Manufacturing</option>
                                <option value="Quality Check">Quality Check</option>
                                <option value="Completed">Completed</option>
                            </select>
                        </div>
                    </div>
                    <div class="table-container">
                        <table id="manufacturingTable">
                            <thead>
                                <tr>
                                    <th>Item ID</th>
                                    <th>Type</th>
                                    <th>Specifications</th>
                                    <th>Current Status</th>
                                    <th>Assigned Worker</th>
                                    <th>Progress</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="manufacturingTableBody">
                                </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <section id="worker-dashboard" class="section">
                <div class="section-header">
                    <h1>üîß My Workspace</h1>
                    <div class="header-actions">
                        <button class="btn-secondary" onclick="refreshWorkerDashboard()">üîÑ Refresh</button>
                        <button class="btn-primary" onclick="clockInOut()">‚è∞ Clock In/Out</button>
                    </div>
                </div>
                
                <div class="worker-stats">
                    <div class="stat-card">
                        <div class="stat-icon">üìã</div>
                        <div class="stat-content">
                            <h3>My Tasks Today</h3>
                            <div class="stat-value" id="workerTasksToday">0</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üíé</div>
                        <div class="stat-content">
                            <h3>Assigned Diamonds</h3>
                            <div class="stat-value" id="assignedDiamonds">0</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚úÖ</div>
                        <div class="stat-content">
                            <h3>Completed Today</h3>
                            <div class="stat-value" id="completedToday">0</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚è±Ô∏è</div>
                        <div class="stat-content">
                            <h3>Working Hours</h3>
                            <div class="stat-value" id="workingHours">0h</div>
                        </div>
                    </div>
                </div>
                
                <div class="current-tasks">
                    <h3>üìã Current Tasks</h3>
                    <div class="tasks-grid" id="currentTasksGrid">
                        </div>
                </div>
                
                <div class="my-diamonds-section">
                    <h3>üíé My Assigned Diamonds</h3>
                    <div class="diamonds-grid" id="myDiamondsGrid">
                        </div>
                </div>
            </section>

            <section id="business-profile" class="section">
                <div class="section-header">
                    <h1>üè¢ Business Profile</h1>
                </div>
                 <div class="profile-section">
                    <h3>Business Details</h3>
                    <div class="profile-details">
                        <p><strong>Company Name:</strong> <span id="profileCompanyName"></span> <button class="btn-edit" onclick="editBusinessProfileField('companyName')">Edit</button></p>
                        <p><strong>Business Type:</strong> <span id="profileBusinessType"></span> <button class="btn-edit" onclick="editBusinessProfileField('businessType')">Edit</button></p>
                        <p><strong>Owner:</strong> <span id="profileOwnerName"></span> <button class="btn-edit" onclick="editBusinessProfileField('ownerName')">Edit</button></p>
                        <p><strong>Email:</strong> <span id="profileEmail"></span> <button class="btn-edit" onclick="editBusinessProfileField('email')">Edit</button></p>
                        <p><strong>Phone:</strong> <span id="profilePhone"></span> <button class="btn-edit" onclick="editBusinessProfileField('phone')">Edit</button></p>
                        <p><strong>GSTIN:</strong> <span id="profileGstin"></span> <button class="btn-edit" onclick="editBusinessProfileField('gstin')">Edit</button></p>
                        <p><strong>Address:</strong> <span id="profileAddress"></span> <button class="btn-edit" onclick="editBusinessProfileField('address')">Edit</button></p>
                    </div>
                </div>
            </section>

            <section id="inventory" class="section">
                <div class="section-header">
                    <h1>üíé Inventory Management</h1>
                     <div class="header-actions">
                        <button class="btn-primary" onclick="showAddDiamondModal()">Add New Item</button>
                    </div>
                </div>
                <div class="table-container">
                    <table id="inventoryTable">
                        <thead>
                            <tr>
                                <th>Item ID</th>
                                <th>Type</th>
                                <th>Carat</th>
                                <th>Color</th>
                                <th>Clarity</th>
                                <th>Status</th>
                                <th>Cost Price</th>
                                <th>Selling Price</th>
                            </tr>
                        </thead>
                        <tbody id="inventoryTableBody">
                            </tbody>
                    </table>
                </div>
            </section>

            <section id="customers" class="section">
                <div class="section-header">
                    <h1>üë• Customer Management</h1>
                     <div class="header-actions">
                        <button class="btn-primary" onclick="showAddCustomerModal()">Add New Customer</button>
                    </div>
                </div>
                 <div class="table-container">
                    <table id="customersTable">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Phone</th>
                                <th>Total Purchases</th>
                                <th>Loyalty Points</th>
                                <th>VIP Status</th>
                            </tr>
                        </thead>
                        <tbody id="customersTableBody">
                            </tbody>
                    </table>
                </div>
            </section>

            <section id="financial" class="section">
                <div class="section-header">
                    <h1>üí∞ Financial Management</h1>
                </div>
                <div class="overview-cards">
                    <div class="overview-card">
                        <div class="card-icon">üíµ</div>
                        <div class="card-content">
                            <h3>Total Revenue</h3>
                            <div class="card-value" id="financialTotalRevenue">‚Çπ0</div>
                        </div>
                    </div>
                    <div class="overview-card">
                        <div class="card-icon">üßæ</div>
                        <div class="card-content">
                            <h3>Total Expenses</h3>
                            <div class="card-value" id="financialTotalExpenses">‚Çπ0</div>
                        </div>
                    </div>
                    <div class="overview-card">
                        <div class="card-icon">üìà</div>
                        <div class="card-content">
                            <h3>Net Profit</h3>
                            <div class="card-value" id="financialNetProfit">‚Çπ0</div>
                        </div>
                    </div>
                </div>
                 <div class="table-container" style="margin-top: 2rem;">
                     <div class="table-header">
                        <h3>Recent Transactions</h3>
                    </div>
                    <table id="transactionsTable">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Description</th>
                                <th>Type</th>
                                <th>Amount</th>
                            </tr>
                        </thead>
                        <tbody id="transactionsTableBody">
                            </tbody>
                    </table>
                </div>
            </section>

            <section id="employees" class="section">
                <div class="section-header">
                    <h1>üë∑ Employee Management</h1>
                     <div class="header-actions">
                        <button class="btn-primary" onclick="showAddEmployeeModal()">Add New Employee</button>
                    </div>
                </div>
                 <div class="table-container">
                    <table id="employeesTable">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Phone</th>
                                <th>Role</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="employeesTableBody">
                            </tbody>
                    </table>
                </div>
            </section>

            <section id="reports" class="section">
                <div class="section-header">
                    <h1>üìà Reports & Analytics</h1>
                </div>
                <div class="reports-grid">
                    <div class="report-card">
                        <h3>üìä Business Overview</h3>
                        <p><strong>Total Business Value:</strong> <span id="reportBusinessValue"></span></p>
                        <p><strong>Monthly Revenue:</strong> <span id="reportMonthlyRevenue"></span></p>
                        <p><strong>Profit Margin:</strong> <span id="reportProfitMargin"></span></p>
                        <p><strong>Outstanding Invoices:</strong> <span id="reportOutstandingInvoices"></span></p>
                    </div>

                    <div class="report-card">
                        <h3>‚öôÔ∏è Manufacturing Report</h3>
                        <p><strong>Items in Pipeline:</strong> <span id="reportPipelineItems"></span></p>
                        <p><strong>Bottleneck:</strong> <span id="reportBottleneck"></span></p>
                        <canvas id="manufacturingChart"></canvas>
                    </div>

                    <div class="report-card">
                        <h3>üíé Inventory Report</h3>
                        <p><strong>Total Inventory Value:</strong> <span id="reportInventoryValue"></span></p>
                        <canvas id="inventoryChart"></canvas>
                    </div>

                    <div class="report-card full-width">
                        <h3>üí∞ Financial Report</h3>
                        <p><strong>Total Sales (Yearly):</strong> <span id="reportTotalSales"></span></p>
                         <canvas id="revenueChart"></canvas>
                    </div>
                </div>
            </section>

            <section id="pricing" class="section">
                <div class="section-header">
                    <h1>üí∞ Pricing Calculator</h1>
                </div>
                <div class="pricing-calculator">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Carat Weight</label>
                            <input type="number" id="priceCarat" placeholder="e.g., 1.5">
                        </div>
                        <div class="form-group">
                            <label>Cut Grade</label>
                            <select id="priceCut">
                                <option value="1.0">Fair</option>
                                <option value="1.2">Good</option>
                                <option value="1.4">Very Good</option>
                                <option value="1.6">Excellent</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Color Grade</label>
                            <select id="priceColor">
                                <option value="1.0">J</option>
                                <option value="1.2">I</option>
                                <option value="1.4">H</option>
                                <option value="1.6">G</option>
                                <option value="1.8">F</option>
                                <option value="2.0">E</option>
                                <option value="2.2">D</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Clarity Grade</label>
                            <select id="priceClarity">
                                <option value="1.0">SI2</option>
                                <option value="1.2">SI1</option>
                                <option value="1.4">VS2</option>
                                <option value="1.6">VS1</option>
                                <option value="1.8">VVS2</option>
                                <option value="2.0">VVS1</option>
                                <option value="2.2">IF</option>
                                <option value="2.4">FL</option>
                            </select>
                        </div>
                    </div>
                    <button class="btn-primary" onclick="calculatePrice()">Calculate Estimated Price</button>
                    <div class="calculated-price">
                        <h3>Estimated Price: <span id="estimatedPrice">‚Çπ0</span></h3>
                    </div>
                </div>
            </section>

            <section id="billing" class="section">
                <div class="section-header">
                    <h1>üßæ Billing & POS</h1>
                </div>
                 <div class="billing-pos">
                    <button class="btn-primary" onclick="showCreateInvoiceModal()">Create New Invoice</button>
                </div>
            </section>

            <section id="my-diamonds" class="section">
                <div class="section-header">
                    <h1>üíé My Diamonds</h1>
                </div>
                <div class="coming-soon">
                    <h2>My Assigned Diamonds</h2>
                    <p>Worker diamond assignment view coming soon!</p>
                </div>
            </section>

            <section id="quality-check" class="section">
                <div class="section-header">
                    <h1>‚úÖ Quality Control</h1>
                </div>
                <div class="coming-soon">
                    <h2>Quality Control System</h2>
                    <p>Complete quality control workflow coming soon!</p>
                </div>
            </section>

            <section id="work-schedule" class="section">
                <div class="section-header">
                    <h1>üìÖ Work Schedule</h1>
                </div>
                <div class="coming-soon">
                    <h2>Work Schedule</h2>
                    <p>Employee scheduling and time tracking coming soon!</p>
                </div>
            </section>
        </main>
    </div>

    <div id="addDiamondModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üíé Add New Diamond/Item</h2>
                <span class="close" onclick="closeModal('addDiamondModal')">&times;</span>
            </div>
            <form id="addDiamondForm">
                <div class="modal-body">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Item Type</label>
                            <select id="diamondItemType" required>
                                <option value="">Select Type</option>
                                <option value="Diamond">Raw Diamond</option>
                                <option value="Ring">Ring</option>
                                <option value="Necklace">Necklace</option>
                                <option value="Earrings">Earrings</option>
                                <option value="Bracelet">Bracelet</option>
                                <option value="Pendant">Pendant</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Serial Number</label>
                            <input type="text" id="diamondSerialNumber" readonly>
                        </div>
                        <div class="form-group">
                            <label>Carat Weight</label>
                            <input type="number" id="caratWeight" step="0.001" min="0" placeholder="0.000">
                        </div>
                        <div class="form-group">
                            <label>Cut Grade</label>
                            <select id="cutGrade">
                                <option value="">Select Cut</option>
                                <option value="Excellent">Excellent</option>
                                <option value="Very Good">Very Good</option>
                                <option value="Good">Good</option>
                                <option value="Fair">Fair</option>
                                <option value="Poor">Poor</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Color Grade</label>
                            <select id="colorGrade">
                                <option value="">Select Color</option>
                                <option value="D">D (Colorless)</option>
                                <option value="E">E (Colorless)</option>
                                <option value="F">F (Colorless)</option>
                                <option value="G">G (Near Colorless)</option>
                                <option value="H">H (Near Colorless)</option>
                                <option value="I">I (Near Colorless)</option>
                                <option value="J">J (Near Colorless)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Clarity Grade</label>
                            <select id="clarityGrade">
                                <option value="">Select Clarity</option>
                                <option value="FL">FL (Flawless)</option>
                                <option value="IF">IF (Internally Flawless)</option>
                                <option value="VVS1">VVS1</option>
                                <option value="VVS2">VVS2</option>
                                <option value="VS1">VS1</option>
                                <option value="VS2">VS2</option>
                                <option value="SI1">SI1</option>
                                <option value="SI2">SI2</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Cost Price</label>
                            <input type="number" id="costPrice" step="0.01" min="0" placeholder="0.00">
                        </div>
                        <div class="form-group">
                            <label>Estimated Selling Price</label>
                            <input type="number" id="estimatedSellingPrice" step="0.01" min="0" placeholder="0.00">
                        </div>
                        <div class="form-group">
                            <label>Priority Level</label>
                            <select id="priorityLevel">
                                <option value="Normal">Normal</option>
                                <option value="High">High</option>
                                <option value="Urgent">Urgent</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn-secondary" onclick="closeModal('addDiamondModal')">Cancel</button>
                    <button type="submit" class="btn-primary">üíé Add Diamond</button>
                </div>
            </form>
        </div>
    </div>
    
    <div id="addEmployeeModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add New Employee</h2>
                <span class="close" onclick="closeModal('addEmployeeModal')">&times;</span>
            </div>
            <div class="modal-body">
                <form id="addEmployeeForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>First Name</label>
                            <input type="text" id="employeeFirstName" required>
                        </div>
                        <div class="form-group">
                            <label>Last Name</label>
                            <input type="text" id="employeeLastName" required>
                        </div>
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" id="employeeEmail" required>
                        </div>
                        <div class="form-group">
                            <label>Phone</label>
                            <input type="tel" id="employeePhone" required>
                        </div>
                        <div class="form-group">
                            <label>Role</label>
                            <select id="employeeRole" required>
                                <option value="Worker">Worker</option>
                                <option value="Manager">Manager</option>
                                <option value="Viewer">Viewer</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Password</label>
                            <input type="password" id="employeePassword" required>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-secondary" onclick="closeModal('addEmployeeModal')">Cancel</button>
                <button type="button" class="btn-primary" onclick="handleAddEmployee()">Add Employee</button>
            </div>
        </div>
    </div>

    <div id="createInvoiceModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Create New Invoice</h2>
                <span class="close" onclick="closeModal('createInvoiceModal')">&times;</span>
            </div>
            <div class="modal-body">
                <form id="invoiceForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Invoice Number</label>
                            <input type="text" id="invoiceNumber" readonly>
                        </div>
                        <div class="form-group">
                            <label>Date</label>
                            <input type="text" id="invoiceDate" readonly>
                        </div>
                    </div>
                    <hr>
                    <h4>Customer Details</h4>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Customer Name</label>
                            <input type="text" id="invoiceCustomerName" placeholder="Enter name">
                        </div>
                        <div class="form-group">
                            <label>Customer Phone</label>
                            <input type="tel" id="invoiceCustomerPhone" placeholder="Enter phone">
                        </div>
                         <div class="form-group">
                            <label>Customer GSTIN</label>
                            <input type="text" id="invoiceCustomerGstin" placeholder="Enter GSTIN">
                        </div>
                        <div class="form-group">
                            <label>Customer Address</label>
                            <textarea id="invoiceCustomerAddress" rows="3"></textarea>
                        </div>
                    </div>
                    <hr>
                    <h4>Invoice Items</h4>
                    <div id="invoiceItemsContainer">
                        </div>
                    <button type="button" class="btn-secondary" onclick="addInvoiceItem()">Add Item</button>
                    <hr>
                    <h4>Totals</h4>
                    <p>Total Amount: <span id="invoiceTotalAmount">0</span></p>
                    <p>GST (3%): <span id="invoiceGstAmount">0</span></p>
                    <p>Grand Total: <span id="invoiceGrandTotal">0</span></p>
                    <p>Total in Words: <span id="invoiceTotalInWords"></span></p>
                    <p>GST in Words: <span id="invoiceGstInWords"></span></p>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-secondary" onclick="closeModal('createInvoiceModal')">Cancel</button>
                <button type="button" class="btn-primary" onclick="createInvoice()">Create & Download Invoice</button>
            </div>
        </div>
    </div>


    <div id="userMenuDropdown" class="dropdown-menu">
        <div class="dropdown-header">
            <div class="user-info">
                <div class="user-avatar-large" id="userAvatarLarge">A</div>
                <div class="user-details">
                    <span class="user-name-large" id="userNameLarge">Loading...</span>
                    <span class="user-role-large" id="userRoleLarge">Owner</span>
                    <span class="user-email-large" id="userEmailLarge">user@example.com</span>
                </div>
            </div>
        </div>
        <div class="dropdown-body">
            <a href="#" onclick="showUserProfile()" class="dropdown-item">
                <span class="dropdown-icon">üë§</span>
                <span>My Profile</span>
            </a>
            <a href="#" onclick="showUserSettings()" class="dropdown-item">
                <span class="dropdown-icon">‚öôÔ∏è</span>
                <span>Settings</span>
            </a>
            <a href="#" onclick="showHelp()" class="dropdown-item">
                <span class="dropdown-icon">‚ùì</span>
                <span>Help & Support</span>
            </a>
            <div class="dropdown-divider"></div>
            <a href="#" onclick="logout()" class="dropdown-item logout">
                <span class="dropdown-icon">üö™</span>
                <span>Logout</span>
            </a>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>